import{r as l,I as k,j as o,a as T,G as N,g as S}from"./index-Mn5vgaVP.js";function A(n,r,x,u,a,i,f){const g=n-x,d=r-u,m=d>=i&&Math.abs(g)<=f,h=g*-1>=i&&Math.abs(d)<=f,p=d*-1>=i&&Math.abs(g)<=f,y=g>=i&&Math.abs(d)<=f;a.onUpDrag!==null&&m&&a.onUpDrag(),a.onRightDrag!==null&&h&&a.onRightDrag(),a.onDownDrag!==null&&p&&a.onDownDrag(),a.onLeftDrag!==null&&y&&a.onLeftDrag()}function R(){const n=l.useContext(k),r=l.useRef(null),x=l.useRef(!1),[u,a]=l.useState(),[i,f]=l.useState(),[g,d]=l.useState(),[m,h]=l.useState(!1);function p(s,t=null){(t===null||t.classList.contains("images-overlay__slider")||t.classList.contains("images-overlay__close-button"))&&(s.setImages([]),s.setCurrentImageIndex(0),s.setMaxHeight(!1))}function y(){return Array.from(document.querySelectorAll(".images-overlay__slider > DIV"))}function E(s){return s.findIndex(t=>!t.classList.contains("prev")&&!t.classList.contains("next"))}function w(s,t){const e=document.querySelector('[class*="images-overlay__prev-button"]'),b=document.querySelector('[class*="images-overlay__next-button"]');e===null||b===null||(s===0?e.classList.add("hide"):e.classList.remove("hide"),s===t-1?b.classList.add("hide"):b.classList.remove("hide"))}function I(s){const t=y();if(t.length<=1)return;const e=E(t);e!==0&&(t[e].classList.add("next"),t[e-1].classList.remove("prev"),s.setCurrentImageIndex(e-1),w(e-1,t.length))}function D(s){const t=y();if(t.length<=1)return;const e=E(t);e!==t.length-1&&(t[e].classList.add("prev"),t[e+1].classList.remove("next"),s.setCurrentImageIndex(e+1),w(e+1,t.length))}function j(s,t){const e=s.target.parentNode;e.style.left=`${S(s)-S(t)}px`}function v(s,t){t?s.classList.add("cursor-grab"):s.classList.remove("cursor-grab");const e=s.parentNode;t?e.classList.add("no-transitions"):e.classList.remove("no-transitions")}function _(s){s!==void 0&&(s.target.parentNode.style.left="")}const L=l.useCallback(s=>{var t,e;switch(s.key){case"Escape":p(n);break;case"ArrowUp":(t=r.current)==null||t.scrollTo({left:r.current.scrollLeft,top:r.current.scrollTop-105,behavior:"smooth"});break;case"ArrowLeft":I(n);break;case"ArrowDown":(e=r.current)==null||e.scrollTo({left:r.current.scrollLeft,top:r.current.scrollTop+105,behavior:"smooth"});break;case"ArrowRight":D(n);break}},[n.images]);l.useEffect(()=>(!x.current&&n.images.length>0&&document.addEventListener("keydown",L),()=>{n.images.length>0&&(x.current=!0),document.removeEventListener("keydown",L,!0)}),[L]),l.useEffect(()=>{var s,t;(s=r==null?void 0:r.current)==null||s.querySelectorAll(".images-overlay__image:not(:first-of-type)").forEach(e=>{e.classList.add("next")}),(t=r==null?void 0:r.current)==null||t.querySelectorAll(".images-overlay__image").forEach(e=>{e.removeAttribute("style")})},[n.images]);function c(){return n.images.length<=1}function C(s){c()||i===void 0||g===void 0||(v(s.target,!1),_(i),A(i.touches[0].clientX,i.touches[0].clientY,g.touches[0].clientX,g.touches[0].clientY,M,60,40))}const M={onUpDrag:null,onRightDrag:()=>I(n),onDownDrag:null,onLeftDrag:()=>D(n)};return o.jsxs("div",{className:"images-overlay",onClick:s=>{m?h(!1):p(n,s.target)},children:[o.jsx("div",{ref:r,className:"images-overlay__slider",children:n.images.map((s,t)=>o.jsx("div",{className:"images-overlay__image",style:{left:t===0?"0%":"100%"},children:o.jsx("img",{src:s,alt:s,className:((n.images.length<=1?"":"cursor-pointer")+(n.maxHeight?" max-height-100vh":"")).trim(),onTouchStart:e=>{c()||(v(e.target,!0),f(e))},onTouchMove:e=>{c()||e.touches.length>1||(d(e),i!==void 0&&j(e,i))},onTouchCancel:C,onTouchEnd:C,onMouseDown:e=>{c()||e.button!==0||(e.preventDefault(),v(e.target,!0),a(e),h(!0))},onMouseMove:e=>{c()||m&&u!==void 0&&j(e,u)},onMouseLeave:e=>{c()||m&&(v(e.target,!1),_(u),a(void 0))},onMouseUp:e=>{c()||(v(e.target,!1),_(u),h(!1),u!==void 0&&A(u.clientX,u.clientY,e.clientX,e.clientY,M,70,50))}})},t))}),o.jsx("div",{className:"images-overlay__close-button",children:o.jsx(T,{className:!0})}),o.jsx("div",{className:"images-overlay__current-info"+(c()?" display-none":""),children:o.jsx("p",{children:`${n.currentImageIndex+1} / ${n.images.length}`})}),o.jsx("div",{className:"images-overlay__prev-button content-center hide"+(c()?" display-none":""),onClick:()=>I(n),children:o.jsx(N,{})}),o.jsx("div",{className:"images-overlay__next-button content-center"+(c()?" display-none":""),onClick:()=>D(n),children:o.jsx(N,{})})]})}export{R as default};
